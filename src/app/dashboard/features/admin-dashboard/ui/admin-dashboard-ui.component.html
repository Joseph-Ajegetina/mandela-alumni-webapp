<div class="dashboard-container">
	<div class="main-content">
		<!-- Key Metrics Section -->
		<section class="metrics-section" aria-labelledby="metrics-heading">
			<div class="metrics-grid" role="grid" aria-label="Dashboard metrics">
				<div
					class="metric-card-admin"
					[class.metric-card-dark]="metric.id === '1'"
					[class.metric-card-light]="metric.id !== '1'"
					*ngFor="let metric of metrics; trackBy: trackByMetric"
					role="gridcell"
					[attr.aria-label]="metric.label + ': ' + metric.value"
				>
					<!-- Header: Label -->
					<div class="metric-header">
						<p class="text-sm opacity-90 mb-0">{{ metric.label }}</p>
					</div>

					<!-- Content: Value -->
					<div class="metric-content">
						<h3 class="text-2xl font-bold mb-0">{{ metric.value }}</h3>
					</div>

					<!-- Footer: Trend -->
					<div class="metric-footer">
						<div class="metric-trend flex items-center gap-sm">
							<tui-icon
								icon="@tui.chart-line"
								[class.text-success]="metric.trend >= 0"
								[class.text-danger]="metric.trend < 0"
								[class.text-white]="metric.id === '1'"
								[attr.aria-label]="'Trend ' + (metric.trend >= 0 ? 'up' : 'down')"
							/>
							<span class="text-xs">
								<span
									[class.text-success]="metric.trend >= 0"
									[class.text-danger]="metric.trend < 0"
									[class.text-white]="metric.id === '1'"
									>{{ metric.trend }}%</span
								>
								from last month
							</span>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Quick Actions Section -->
		<section class="quick-actions card" aria-labelledby="quick-actions-heading">
			<div class="section-header">
				<h4 id="quick-actions-heading">Quick Actions</h4>
				<tui-icon icon="@tui.zap" aria-hidden="true" />
			</div>
			<div
				class="actions-grid grid grid-cols-5 gap-md"
				role="group"
				aria-label="Quick action buttons"
			>
				<button class="action-btn" (click)="onAddUser()" aria-label="Add new user" type="button">
					<tui-icon icon="@tui.user-plus" aria-hidden="true" />
					<span class="text-sm">Add User</span>
				</button>
				<button
					class="action-btn"
					(click)="onCreateEvent()"
					aria-label="Create new event"
					type="button"
				>
					<tui-icon icon="@tui.calendar-plus" aria-hidden="true" />
					<span class="text-sm">Create Event</span>
				</button>
				<button class="action-btn" aria-label="Send notice to users" type="button">
					<tui-icon icon="@tui.pen-line" aria-hidden="true" />
					<span class="text-sm">Send Notice</span>
				</button>
				<button class="action-btn" aria-label="Make a donation" type="button">
					<tui-icon icon="@tui.heart" aria-hidden="true" />
					<span class="text-sm">Make a donation</span>
				</button>
				<button class="action-btn" aria-label="Export dashboard data" type="button">
					<tui-icon icon="@tui.download" aria-hidden="true" />
					<span class="text-sm">Export Data</span>
				</button>
			</div>
		</section>

		<!-- Recent User Registrations Section -->
		<section class="recent-registrations card" aria-labelledby="recent-registrations-heading">
			<div class="section-header">
				<h4 id="recent-registrations-heading">Recent User Registrations</h4>
				<tui-icon icon="@tui.users" aria-hidden="true" />
			</div>
			<div class="table-container">
				<table class="w-full" role="table" aria-label="Recent user registrations">
					<thead>
						<tr class="border-b">
							<th class="text-left p-md text-sm font-semibold" scope="col">Name</th>
							<th class="text-left p-md text-sm font-semibold" scope="col">Email</th>
							<th class="text-left p-md text-sm font-semibold" scope="col">Date Submitted</th>
							<th class="text-left p-md text-sm font-semibold" scope="col">Status</th>
						</tr>
					</thead>
					<tbody>
						<tr class="border-b" *ngFor="let user of recentUsers; trackBy: trackByUser">
							<td class="p-md text-sm">{{ user.name }}</td>
							<td class="p-md text-sm">{{ user.email }}</td>
							<td class="p-md text-sm">{{ user.date }}</td>
							<td class="p-md">
								<span
									[class]="user.status === 'Active' ? 'status-active' : 'status-pending'"
									[attr.aria-label]="'Status: ' + user.status"
								>
									{{ user.status }}
								</span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</section>

		<!-- Manage Upcoming Events Section -->
		<section class="manage-events card" aria-labelledby="manage-events-heading">
			<div class="section-header flex-between">
				<div class="flex gap-sm">
					<h4 id="manage-events-heading">Manage Upcoming Events</h4>
					<tui-icon icon="@tui.calendar" aria-hidden="true" />
				</div>
				<a href="/events" class="text-secondary text-sm flex gap-sm" aria-label="View all events">
					<span>View All</span>
					<tui-icon icon="@tui.arrow-right" aria-hidden="true" />
				</a>
			</div>
			<div class="events-grid grid grid-cols-2 gap-lg" role="grid" aria-label="Upcoming events">
				<div
					class="event-card flex bg-white rounded-md overflow-hidden shadow-md"
					(click)="onEventClick(event)"
					(keydown.enter)="onEventClick(event)"
					(keydown.space)="onEventClick(event)"
					tabindex="0"
					role="button"
					[attr.aria-label]="'Event: ' + event.title + ' on ' + event.date"
					*ngFor="let event of events; trackBy: trackByEvent"
				>
					<div class="event-content flex-1 p-md">
						<h5 class="text-light text-sm mb-sm font-semibold">{{ event.title }}</h5>
						<p class="text-muted text-xs mb-sm">{{ event.date }}</p>
						<p class="text-xs" *ngIf="event.attendees">{{ event.attendees }}</p>
					</div>
					<div class="event-actions p-md flex-center">
						<button
							class="btn btn-secondary p-sm"
							(click)="onEventAction(event)"
							aria-label="Manage event"
							type="button"
						>
							<tui-icon icon="@tui.square-arrow-out-up-right" aria-hidden="true" />
						</button>
					</div>
				</div>
			</div>
		</section>
	</div>

	<div class="sidebar">
		<!-- Calendar Section -->
		<section class="calendar-section card" aria-labelledby="calendar-heading">
			<div class="section-header">
				<h4 id="calendar-heading">Calendar</h4>
				<tui-icon icon="@tui.calendar-days" class="text-primary" aria-hidden="true" />
			</div>
			<div class="calendar-widget">
				<tui-calendar
					[value]="selectedDays"
					[markerHandler]="markerHandler"
					(dayClick)="onDayClick($event)"
					aria-label="Dashboard calendar with reminders"
				>
				</tui-calendar>
			</div>
		</section>

		<!-- Reminders Section -->
		<section class="reminders-section" aria-labelledby="reminders-heading">
			<h4 id="reminders-heading" class="text-primary text-lg mb-md">Reminders</h4>
			<div class="reminders-list" role="list" aria-label="Reminders list">
				<div *ngIf="reminders && reminders.length > 0; else noReminders">
					<div
						class="reminder-item"
						*ngFor="let reminder of reminders; trackBy: trackByReminder"
						[class]="'reminder-item-' + getReminderColor(reminder)"
						role="listitem"
						[attr.aria-label]="reminder.title + ' - ' + getDaysRemaining(reminder.dueDate)"
					>
						<div
							class="reminder-dot"
							[class]="'bg-reminder-' + getReminderColor(reminder) + ' rounded-full w-3 h-3'"
							aria-hidden="true"
						></div>
						<div class="reminder-content flex-1">
							<p class="text-sm font-medium mb-0">{{ reminder.title }}</p>
							<p class="text-xs text-muted mb-0">{{ getDaysRemaining(reminder.dueDate) }}</p>
						</div>
					</div>
				</div>
				<ng-template #noReminders>
					<div class="no-reminders" role="listitem">
						<p class="text-sm text-muted text-center">No Reminders</p>
					</div>
				</ng-template>
			</div>
		</section>
	</div>
</div>
