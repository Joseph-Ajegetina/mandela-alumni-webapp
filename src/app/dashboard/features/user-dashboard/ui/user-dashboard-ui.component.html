<!-- User Dashboard Layout -->
<div class="dashboard-container">
	<div class="main-content">
		<!-- Key Metrics Section -->
		<section class="metrics-section" aria-labelledby="metrics-heading" id="metrics-section">
			<h2 id="metrics-heading" class="sr-only">Dashboard Metrics</h2>
			<div class="metrics-grid" role="grid" aria-label="Dashboard metrics">
				<div
					class="metric-card-user"
					[class.metric-card-dark]="metric.id === '1'"
					[class.metric-card-light]="metric.id !== '1'"
					*ngFor="let metric of metrics; trackBy: trackByMetric"
					role="gridcell"
					[attr.aria-label]="metric.label + ': ' + metric.value"
				>
					<!-- Header: Label -->
					<div class="metric-header">
						<p class="text-sm opacity-90 mb-0">{{ metric.label }}</p>
					</div>

					<!-- Content: Value -->
					<div class="metric-content">
						<h3 class="text-2xl font-bold mb-0">{{ metric.value }}</h3>
					</div>

					<!-- Footer: Trend -->
					<div class="metric-footer">
						<div class="metric-trend flex items-center gap-sm">
							<tui-icon
								icon="@tui.chart-line"
								[class.text-success]="metric.trend >= 0"
								[class.text-danger]="metric.trend < 0"
								[class.text-white]="metric.id === '1'"
								[attr.aria-label]="'Trend ' + (metric.trend >= 0 ? 'up' : 'down')"
							/>
							<span class="text-xs">
								<span
									[class.text-success]="metric.trend >= 0"
									[class.text-danger]="metric.trend < 0"
									[class.text-white]="metric.id === '1'"
									>{{ metric.trend }}%</span
								>
								from last month
							</span>
						</div>
					</div>

					<!-- Bottom Right Corner Visual Element -->
					<div class="metric-corner-element" aria-hidden="true"></div>
				</div>
			</div>
		</section>

		<!-- Quick Actions Section -->
		<section class="quick-actions card" aria-labelledby="quick-actions-heading">
			<div class="section-header">
				<div class="flex gap-sm">
					<h4 id="quick-actions-heading">Quick actions</h4>
					<tui-icon icon="tuiIconRefresh" aria-hidden="true" />
				</div>
			</div>
			<div class="actions-grid" role="group" aria-label="Quick action buttons">
				<button
					class="action-btn"
					(click)="onPayDues()"
					aria-label="Pay membership dues"
					type="button"
				>
					<tui-icon icon="@tui.banknote" aria-hidden="true" />
					<span class="text-sm">Pay Dues</span>
				</button>
				<button
					class="action-btn"
					(click)="onFindAlumni()"
					aria-label="Find alumni members"
					type="button"
				>
					<tui-icon icon="@tui.search" aria-hidden="true" />
					<span class="text-sm">Find an Alumni</span>
				</button>
				<button
					class="action-btn"
					(click)="onRegisterEvent()"
					aria-label="Register for an event"
					type="button"
				>
					<tui-icon icon="@tui.pen-line" aria-hidden="true" />
					<span class="text-sm">Register for an event</span>
				</button>
				<button
					class="action-btn"
					(click)="onMakeDonation()"
					aria-label="Make a donation"
					type="button"
				>
					<tui-icon icon="@tui.heart" aria-hidden="true" />
					<span class="text-sm">Make a donation</span>
				</button>
			</div>
		</section>

		<!-- Upcoming Events Section -->
		<section class="upcoming-events card" aria-labelledby="upcoming-events-heading">
			<div class="section-header flex-between">
				<div class="flex gap-sm">
					<h4 id="upcoming-events-heading">Upcoming Events</h4>
					<tui-icon icon="tuiIconCalendar" aria-hidden="true" />
				</div>
				<a href="/events" class="text-secondary text-sm flex gap-sm" aria-label="View all events">
					<span>See More</span>
					<tui-icon icon="tuiIconArrowRight" aria-hidden="true" />
				</a>
			</div>
			<div class="events-container">
				<div class="events-grid" role="grid" aria-label="Upcoming events">
					<div
						class="event-card"
						(click)="onEventClick(event)"
						(keydown.enter)="onEventClick(event)"
						(keydown.space)="onEventClick(event)"
						tabindex="0"
						role="button"
						[attr.aria-label]="'Event: ' + event.title + ' on ' + event.date"
						*ngFor="let event of events; trackBy: trackByEvent"
					>
						<div class="event-image">
							<img
								[src]="event.image"
								[alt]="event.title"
								class="w-full h-full object-cover"
								loading="lazy"
							/>
						</div>
						<div class="event-content">
							<h5 class="event-title">{{ event.title }}</h5>
							<p class="event-description">{{ event.description }}</p>
							<div class="event-footer">
								<div class="event-date">
									<span>{{ event.date }}</span>
									<span *ngIf="event.time">{{ event.time }}</span>
								</div>
								<div class="event-arrow">
									<tui-icon icon="tuiIconArrowRight" aria-hidden="true" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Recent Activities Section -->
		<section class="recent-activities card" aria-labelledby="recent-activities-heading">
			<div class="section-header">
				<div class="flex gap-sm">
					<h4 id="recent-activities-heading">Recent Activities</h4>
					<tui-icon icon="tuiIconBarChart" aria-hidden="true" />
				</div>
			</div>
			<div class="activities-list" role="list" aria-label="Recent activities">
				<div
					class="activity-item"
					*ngFor="let activity of activities; trackBy: trackByActivity"
					role="listitem"
					[attr.aria-label]="activity.title + ' - ' + activity.description"
				>
					<div class="activity-icon">
						<tui-icon [icon]="activity.icon" class="text-primary" aria-hidden="true" />
					</div>
					<div class="activity-content">
						<p class="text-sm font-medium">{{ activity.title }}</p>
						<p class="text-xs text-muted">{{ activity.description }}</p>
					</div>
					<div class="activity-status">
						<span
							[class]="activity.status === 'completed' ? 'status-completed' : 'status-pending'"
							[attr.aria-label]="'Status: ' + activity.status"
						>
							{{ activity.status }}
						</span>
					</div>
				</div>
			</div>
		</section>
	</div>

	<div class="sidebar">
		<!-- Alumni Impact Section -->
		<section class="alumni-impact card" aria-labelledby="alumni-impact-heading">
			<div class="section-header flex-between">
				<div class="flex gap-sm">
					<h4 id="alumni-impact-heading">Alumni Impact</h4>
					<tui-icon icon="tuiIconGraduationCap" aria-hidden="true" />
				</div>
			</div>
			<div class="impact-grid" role="grid" aria-label="Alumni impact metrics">
				<div class="impact-card impact-card-blue" role="gridcell">
					<div class="text-xl font-bold text-blue-600 mb-xs">24</div>
					<div class="text-xs text-muted uppercase tracking-wide">Years Member</div>
				</div>
				<div class="impact-card impact-card-orange" role="gridcell">
					<div class="text-xl font-bold text-orange-600 mb-xs">$2000</div>
					<div class="text-xs text-muted uppercase tracking-wide">Donated</div>
				</div>
				<div class="impact-card impact-card-gray" role="gridcell">
					<div class="text-xl font-bold text-gray-600 mb-xs">12</div>
					<div class="text-xs text-muted uppercase tracking-wide">Events Attended</div>
				</div>
				<div class="impact-card impact-card-green" role="gridcell">
					<div class="text-xl font-bold text-green-600 mb-xs">120</div>
					<div class="text-xs text-muted uppercase tracking-wide">Connections</div>
				</div>
			</div>
			<button class="impact-report-btn" aria-label="View full impact report" type="button">
				View Full Impact Report
			</button>
		</section>

		<!-- Calendar Section -->
		<section class="calendar-section card" aria-labelledby="calendar-heading">
			<div class="section-header">
				<h4 id="calendar-heading">Calendar</h4>
				<tui-icon icon="@tui.calendar-days" class="text-primary" aria-hidden="true" />
			</div>
			<div class="calendar-widget">
				<tui-calendar
					[value]="selectedDays"
					[markerHandler]="markerHandler"
					(dayClick)="onDayClick($event)"
					aria-label="Dashboard calendar with reminders"
				>
				</tui-calendar>
			</div>
		</section>

		<!-- Reminders Section -->
		<section class="reminders-section" aria-labelledby="reminders-heading">
			<h4 id="reminders-heading" class="text-primary text-lg mb-md">Reminders</h4>
			<div class="reminders-list" role="list" aria-label="Reminders list">
				<div *ngIf="reminders && reminders.length > 0; else noReminders">
					<div
						class="reminder-item"
						*ngFor="let reminder of reminders; trackBy: trackByReminder"
						[class]="'reminder-item-' + getReminderColor(reminder)"
						role="listitem"
						[attr.aria-label]="reminder.title + ' - ' + getDaysRemaining(reminder.dueDate)"
					>
						<div
							class="reminder-dot"
							[class]="'bg-reminder-' + getReminderColor(reminder) + ' rounded-full w-3 h-3'"
							aria-hidden="true"
						></div>
						<div class="reminder-content flex-1">
							<p class="text-sm font-medium mb-0">{{ reminder.title }}</p>
							<p class="text-xs text-muted mb-0">{{ getDaysRemaining(reminder.dueDate) }}</p>
						</div>
					</div>
				</div>
				<ng-template #noReminders>
					<div class="no-reminders" role="listitem">
						<p class="text-sm text-muted text-center">No Reminders</p>
					</div>
				</ng-template>
			</div>
		</section>
	</div>
</div>
